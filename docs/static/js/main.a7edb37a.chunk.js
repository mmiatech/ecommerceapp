(this.webpackJsonpecommerceapp=this.webpackJsonpecommerceapp||[]).push([[0],{292:function(e,t,n){},357:function(e,t){},359:function(e,t){},370:function(e,t){},372:function(e,t){},399:function(e,t){},401:function(e,t){},402:function(e,t){},407:function(e,t){},409:function(e,t){},428:function(e,t){},440:function(e,t){},443:function(e,t){},521:function(e,t,n){var r={"./amplify-amazon-button_5.entry.js":[551,16],"./amplify-auth-fields_9.entry.js":[552,17],"./amplify-authenticator.entry.js":[553,5],"./amplify-button_3.entry.js":[554,18],"./amplify-chatbot.entry.js":[555,4],"./amplify-checkbox.entry.js":[556,19],"./amplify-confirm-sign-in_7.entry.js":[557,6],"./amplify-container.entry.js":[558,20],"./amplify-federated-buttons_2.entry.js":[559,21],"./amplify-federated-sign-in.entry.js":[560,22],"./amplify-form-field_4.entry.js":[561,23],"./amplify-greetings.entry.js":[562,24],"./amplify-icon-button.entry.js":[563,25],"./amplify-icon.entry.js":[564,7],"./amplify-link.entry.js":[565,26],"./amplify-nav_2.entry.js":[566,27],"./amplify-photo-picker.entry.js":[567,28],"./amplify-picker.entry.js":[568,29],"./amplify-radio-button_2.entry.js":[569,8],"./amplify-s3-album.entry.js":[570,9],"./amplify-s3-image-picker.entry.js":[571,10],"./amplify-s3-image.entry.js":[572,11],"./amplify-s3-text-picker.entry.js":[573,12],"./amplify-s3-text.entry.js":[574,13],"./amplify-select-mfa-type.entry.js":[575,30],"./amplify-sign-in-button.entry.js":[576,14],"./amplify-toast.entry.js":[577,31],"./amplify-tooltip.entry.js":[578,32]};function a(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],a=t[0];return n.e(t[1]).then((function(){return n(a)}))}a.keys=function(){return Object.keys(r)},a.id=521,e.exports=a},548:function(e,t,n){"use strict";n.r(t);var r=n(12),a=n(0),c=n(44),i=n.n(c),o=n(82),s=n(125),u=n(39),l=n(605),p=n(610),j=n(611),d=n(612),f=n(98),m=n(72),b=n.n(m),y=n(97),h=n(138),O=function(){var e=Object(y.a)(b.a.mark((function e(t){var n,r,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.currentSession();case 3:n=e.sent,console.log(n),console.log(n),r=n.idToken.payload,a=r["cognito:groups"]&&r["cognito:groups"].includes("Admin"),t({username:r.email,isAuthorized:a}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0),t({});case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),x=function(e){var t=e.current,n=Object(a.useState)({}),c=Object(o.a)(n,2),i=c[0],u=c[1];return Object(a.useEffect)((function(){O(u),f.a.listen("auth",(function(e){var t=e.payload.event;console.log("event: ",t),"signIn"!==t&&"signOut"!==t||O(u)}))}),[]),Object(r.jsxs)("div",{children:[Object(r.jsxs)(l.a,{selectedKeys:[t],mode:"horizontal",children:[Object(r.jsx)(l.a.Item,{children:Object(r.jsxs)(s.b,{to:"/",children:[Object(r.jsx)(p.a,{}),"Home"]})},"home"),Object(r.jsx)(l.a.Item,{children:Object(r.jsxs)(s.b,{to:"/profile",children:[Object(r.jsx)(j.a,{}),"Profile"]})},"profile"),i.isAuthorized&&Object(r.jsx)(l.a.Item,{children:Object(r.jsxs)(s.b,{to:"/admin",children:[Object(r.jsx)(d.a,{}),"Admin"]})},"admin")]}),Object(r.jsx)("h3",{children:i.username})]})},g=n(171),v=n(95),_=(n(292),n(607)),w=n(333),k=n(308),I=n(609),E={name:"",price:""},z={width:400,margin:"20px auto"},S={marginTop:10},A={marginTop:10},C=Object(I.a)((function(){var e=Object(a.useState)(E),t=Object(o.a)(e,2),n=t[0],c=t[1],i=function(e){var t=Object(v.a)(Object(v.a)({},n),{},Object(g.a)({},e.target.name,e.target.value));c(t)},s=function(){var e=Object(y.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={body:Object(v.a)(Object(v.a)({},n),{},{price:parseInt(n.price)})},c(E),e.next=5,k.a.post("ecommerceapi","/products",t);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("error adding item...");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(r.jsxs)("div",{style:z,children:[Object(r.jsx)(_.a,{name:"name",onChange:i,value:n.name,placeholder:"Item name",style:S}),Object(r.jsx)(_.a,{name:"price",onChange:i,value:n.price,style:S,placeholder:"Item price"}),Object(r.jsx)(w.a,{style:A,onClick:s,children:"Add Product"})]})})),L={width:900,margin:"0 auto",padding:"20px 0px"},T=function(e){var t=e.children;return Object(r.jsx)("div",{style:L,children:t})},q=n(604),N=function(){var e=Object(a.useState)({products:[],loading:!0}),t=Object(o.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)({}),s=Object(o.a)(i,2),u=s[0],l=s[1],p=!1;Object(a.useEffect)((function(){return j(),O(l),function(){return p=!0}}),[]);var j=function(){var e=Object(y.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.get("ecommerceapi","/products");case 2:if(t=e.sent,console.log("data: ",t),!p){e.next=6;break}return e.abrupt("return");case 6:c({products:t.data.Items,loading:!1});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Object(y.a)(b.a.mark((function e(t){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=n.products.filter((function(e){return e.id!==t})),c(Object(v.a)(Object(v.a)({},n),{},{products:r})),e.next=5,k.a.del("ecommerceapi","/products",{body:{id:t}});case 5:console.log("successfully deleted item"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsx)(T,{children:Object(r.jsx)(q.b,{itemLayout:"horizontal",dataSource:n.products,loading:n.loading,renderItem:function(e){return Object(r.jsx)(q.b.Item,{actions:u.isAuthorized?[Object(r.jsx)("p",{onClick:function(){return d(e.id)},children:"delete"},e.id)]:null,children:Object(r.jsx)(q.b.Item.Meta,{title:e.name,description:e.price})})}})})},P=n(606),D={width:400,margin:"20px auto"},J=Object(I.a)((function(){return Object(r.jsx)("div",{style:D,children:Object(r.jsx)(P.c,{})})})),M=function(){var e=Object(a.useState)("home"),t=Object(o.a)(e,2),n=t[0],c=t[1];Object(a.useEffect)((function(){return i(),window.addEventListener("hashchange",i),function(){return window.removeEventListener("hashchange",i)}}),[]);var i=function(){var e=window.location.href.split("/"),t=e[e.length-1];console.log("pathname: ",t),c(t||"home")};return Object(r.jsxs)(s.a,{children:[Object(r.jsx)(x,{current:n}),Object(r.jsxs)(u.c,{children:[Object(r.jsx)(u.a,{exact:!0,path:"/",component:N}),Object(r.jsx)(u.a,{path:"/admin",component:C}),Object(r.jsx)(u.a,{path:"/profile",component:J}),Object(r.jsx)(u.a,{component:N})]})]})},U=(n(540),{aws_project_region:"us-east-1",aws_cognito_identity_pool_id:"us-east-1:3a748439-c1d7-4c79-96e5-7c2474554a1b",aws_cognito_region:"us-east-1",aws_user_pools_id:"us-east-1_Lpkgf55yk",aws_user_pools_web_client_id:"748d35j74q6t17jan8qqvcl6vl",oauth:{},aws_dynamodb_all_tables_region:"us-east-1",aws_dynamodb_table_schemas:[{tableName:"producttable-dev",region:"us-east-1"}],aws_cloud_logic_custom:[{name:"ecommerceapi",endpoint:"https://37vyok0268.execute-api.us-east-1.amazonaws.com/dev",region:"us-east-1"}]});n(108).default.configure(U),i.a.render(Object(r.jsx)(M,{}),document.getElementById("root"))}},[[548,2,3]]]);
//# sourceMappingURL=main.a7edb37a.chunk.js.map